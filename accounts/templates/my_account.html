{% extends "base.html" %}

{% block title_content %}
  <title>Mercadinho X — Minha Conta</title>
{% endblock title_content %}

{% block content %}
  <style>
    .sidebar {
        width: 260px;
        background: #ffffff;
        height: 100vh;
        border-right: 1px solid #eee;
        padding: 30px 20px;
        box-sizing: border-box;
        position: fixed;
    }

    .sidebar h2 {
        margin-top: 0;
        font-size: 22px;
        font-weight: 700;
        margin-bottom: 25px;
    }

    .menu-item {
        padding: 12px 15px;
        margin-bottom: 8px;
        cursor: pointer;
        border-radius: 6px;
        transition: 0.2s;
        font-size: 15px;
    }

    .menu-item:hover,
    .menu-item.active {
        background: #4CAF50;
        color: white;
    }

    /* Conteúdo */
    .content {
        margin-left: 260px;
        padding: 40px;
        width: calc(100% - 260px);
    }

    .content-section {
        display: none;
    }

    .content-section.active {
        display: block;
    }

    h1 {
        margin-top: 0;
    }

    .btn {
      padding:10px 20px;
      background:#4CAF50;
      color:#fff;
      border:none;
      border-radius:6px;
    }

    .info-box {
        background: white;
        padding: 25px;
        border-radius: 8px;
        box-shadow: 0px 2px 5px rgba(0,0,0,0.06);
        max-width: 600px;
    }

    .order-item {
        padding: 15px;
        background: white;
        border-radius: 6px;
        margin-bottom: 12px;
        border: 1px solid #eee;
    }

    .address-item {
        padding: 15px;
        background: white;
        border-radius: 6px;
        margin-bottom: 12px;
        border: 1px solid #eee;
    }
  </style>

  <!-- MENU LATERAL -->
    <aside class="sidebar">
      <h2>Minha Área</h2>

      <div class="menu-item active" onclick="showSection('conta')">Minha Conta</div>
      <div class="menu-item" onclick="showSection('pedidos')">Meus Pedidos</div>
      <div class="menu-item" onclick="showSection('enderecos')">Meus Endereços</div>
      <div class="menu-item" onclick="logout()">Sair</div>
    </aside>

  <main class="content">

        <!-- Minha Conta -->
        <section id="conta" class="content-section active">
            <h1>Informações da Conta</h1>
            <div class="info-box">
              <p><strong>Nome:</strong> {{user.first_name}} {{user.last_name}}</p>
              <p><strong>Email:</strong> {{user.email}}</p>
              <p><strong>Telefone:</strong> (11) 99999-9999</p>
              <hr>
              <button class="btn">
                  Editar Informações
              </button>
            </div>
        </section>

        <!-- Meus Pedidos -->
        <section id="pedidos" class="content-section">
            <h1>Meus Pedidos</h1>
            {% for order in orders %}
            <a href="#" style="text-decoration: none; color: inherit;">
              <div class="order-item">
                <strong>Pedido #{{order.id}}</strong> — {{order.created_at}} <br>
                Total: <span style="color:#4CAF50;">{{ order.total }}</span>
              </div>
            </a>
            {% endfor %}

        </section>

    </main>
    {% block script %}
      <script>
        function showSection(id) {
          // esconder todas
          document.querySelectorAll('.content-section').forEach(sec => sec.classList.remove('active'));
          document.querySelectorAll('.menu-item').forEach(item => item.classList.remove('active'));

          // mostrar a escolhida
          document.getElementById(id).classList.add('active');

          // ativar menu
          event.target.classList.add('active');
        }

        function logout() {
            alert("Você saiu da conta.");
            window.location.href = "login.html";
        }
      </script>
    {% endblock script %}
{% endblock content %}